<title>R</title><body bgcolor=#fff style=margin:0;overflow:hidden>
<div style=position:relative;width:256px;margin:auto>
<div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:9;pointer-events:none">+</div>
<div id=V style=background:#C4A484;width:256px;height:256px></div>
<div style="position:absolute;bottom:10;right:10;width:75px;border-bottom:2px solid #000;text-align:right">50km</div>
</div>
<div style=text-align:center>
<input id=lt placeholder=Lat size=4> <input id=ln placeholder=Lon size=4>
<button onclick=m()>GO</button> <button onclick=g()>GPS</button>
<p id=M>...</p>
</div>
<script>
Z=6;S=256;V=document.getElementById('V');M=document.getElementById('M');
f=(y,x)=>{
 v=2**Z;r=y*Math.PI/180;
 X=0|(x+180)/360*v;
 Y=0|(1-Math.log(Math.tan(r)+1/Math.cos(r))/Math.PI)/2*v;
 fetch('https://api.rainviewer.com/public/weather-maps.json').then(r=>r.json()).then(j=>{
  t=j.radar.past[j.radar.past.length-1].time;
  V.innerHTML=`<img src="${j.host}/v2/radar/${t}/${S}/${Z}/${X}/${Y}/0/0_0.png" width=256>`;
  M.innerText=new Date(t*1000).toLocaleTimeString();
 }).catch(e=>M.innerText='!');
};
m=()=>f(1*lt.value,1*ln.value);
g=()=>navigator.geolocation.getCurrentPosition(p=>f(p.coords.latitude,p.coords.longitude),e=>M.innerText='!',{enableHighAccuracy:1,timeout:10000});
</script>
