<!DOCTYPE html><body bgcolor=#000 style=color:#fff;text-align:center>
<div style="position:relative;width:256px;margin:20px auto;border:2px solid #555">
 <div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:9">+</div>
 <div id=V style="height:256px;background:#222"></div>
</div>
<input id=a placeholder=Lat size=3><input id=o placeholder=Lon size=3>
<button onclick=g()>GPS</button><button onclick=m()>GO</button>
<p id=M>...</p>
<script>
let J,f=(y,x)=>{
  if(!J)return fetch('https://api.rainviewer.com/public/weather-maps.json').then(r=>r.json()).then(d=>{J=d;f(y,x)});
  let t=J.radar.past.at(-1).time,v=64,r=y*Math.PI/180,
  X=0|(x+180)/360*v,
  Y=0|(1-Math.log(Math.tan(r)+1/Math.cos(r))/Math.PI)/2*v;
  V.innerHTML=`<img src="https://tile.openstreetmap.org/6/${X}/${Y}.png" style="position:absolute;left:0"><img src="${J.host}/v2/radar/${t}/256/6/${X}/${Y}/2/1_1.png" style="position:absolute;left:0">`;
  M.innerText=new Date(t*1000).toLocaleTimeString()
},
m=()=>f(1*a.value,1*o.value),
g=()=>navigator.geolocation.getCurrentPosition(p=>{a.value=p.coords.latitude;o.value=p.coords.longitude;m()});
f(47.6,-122.3); // Default load
</script>
