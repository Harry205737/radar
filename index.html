<title>R</title><body bgcolor=#fff style=margin:0;text-align:center>
<div id=C style="position:relative;width:256px;height:256px;margin:auto;background:#C4A484">
 <div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:9;font:40px serif;pointer-events:none">+</div>
 <img id=I style="width:256px;image-rendering:pixelated">
</div>
<button onclick=n()>SCAN</button><p id=M style=font:9px;sans-serif>...</p>
<script>
Z=5;S=128;M=document.getElementById('M');I=document.getElementById('I');
n=()=>navigator.geolocation.getCurrentPosition(async p=>{
 M.innerText='...';
 y=p.coords.latitude;x=p.coords.longitude;
 v=2**Z;r=y*Math.PI/180;
 X=Math.floor((x+180)/360*v);Y=Math.floor((1-Math.log(Math.tan(r)+1/Math.cos(r))/Math.PI)/2*v);
 try{
  j=await(await fetch('https://api.rainviewer.com/public/weather-maps.json')).json();
  t=j.radar.past.pop().time;
  I.src=`${j.host}/v2/radar/${t}/${S}/${Z}/${X}/${Y}/1/0_0.png`;
  M.innerText=new Date(t*1000).toLocaleTimeString();
 }catch(e){M.innerText='!'}
});
</script>
