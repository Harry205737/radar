<title>R</title><body bgcolor=#000 style=margin:0;overflow:hidden;color:#fff>
<div id=C style="position:relative;width:256px;height:256px;margin:auto;border:1px solid #333">
 <div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:9;font:30px serif;color:red">+</div>
 <div id=V></div>
</div>
<div style=text-align:center;padding-top:10px>
 <button onclick=n() style="padding:10px 20px">SCAN LOW-DATA</button>
 <p id=M style="font-family:sans-serif;font-size:12px">Ready</p>
</div>
<script>
Z=6;S=256;V=document.getElementById('V');M=document.getElementById('M');
n=()=>navigator.geolocation.getCurrentPosition(async p=>{
 M.innerText='Loading...';
 y=p.coords.latitude;x=p.coords.longitude;
 v=2**Z;r=y*Math.PI/180;
 X=Math.floor((x+180)/360*v);
 Y=Math.floor((1-Math.log(Math.tan(r)+1/Math.cos(r))/Math.PI)/2*v);
 try{
  j=await(await fetch('https://api.rainviewer.com/public/weather-maps.json')).json();
  t=j.radar.past[j.radar.past.length-1].time;h=j.host;
  V.innerHTML=`<img src="${h}/v2/radar/${t}/${S}/${Z}/${X}/${Y}/1/1_1.png" style="width:256px;height:256px">`;
  M.innerText=new Date(t*1000).toLocaleTimeString() + ` (Tile: ${X},${Y})`;
 }catch(e){M.innerText='Error: Check Signal'}
},e=>M.innerText='GPS Denied',{enableHighAccuracy:true});
</script>
